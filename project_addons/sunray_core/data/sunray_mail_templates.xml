<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- Email OTP Template - Default -->
        <record id="mail_template_email_otp_default" model="mail.template">
            <field name="name">Sunray: OTP Code for Email Login</field>
            <field name="model_id" ref="model_sunray_host"/>
            <field name="subject">Your Sunray login code for {{ object.domain }}</field>
            <field name="email_from">{{ object.env.company.email_formatted or 'noreply@sunray-zero-trust.app' }}</field>
            <field name="email_to">{{ ctx.get('recipient_email', '') }}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 13px;">
    <div style="background-color: #f9f9f9; padding: 20px 0px;">
        <table cellpadding="0" cellspacing="0" style="margin: 0 auto; width: 600px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <!-- Header -->
            <tr>
                <td style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; text-align: center; border-radius: 8px 8px 0 0;">
                    <h1 style="color: white; margin: 0; font-size: 24px; font-weight: normal;">
                        Your Login Code
                    </h1>
                </td>
            </tr>
            <!-- Body -->
            <tr>
                <td style="padding: 30px;">
                    <p style="margin: 0 0 20px; font-size: 14px; line-height: 1.6;">
                        Use this code to sign in to <strong><t t-out="object.domain">host.example.com</t></strong>:
                    </p>
                    <!-- OTP Code Box -->
                    <div style="font-size: 32px; font-weight: bold; letter-spacing: 4px; background: #f5f5f5; padding: 20px; text-align: center; border-radius: 8px; margin: 20px 0; font-family: monospace;">
                        <t t-out="ctx.get('otp_code', '')">XXXX-XXXX</t>
                    </div>
                    <p style="margin: 20px 0; font-size: 14px; line-height: 1.6; text-align: center;">
                        This code expires in <strong><t t-out="ctx.get('validity_minutes', 5)">5</t> minutes</strong>.
                    </p>
                    <p style="margin: 20px 0; font-size: 13px; color: #666;">
                        If you didn't request this code, you can safely ignore this email.
                    </p>
                    
                    <p style="margin: 20px 0; font-size: 13px; color: #f60a0aff;">
                        This code is strictly personal. Never share it with anyone, including support staff.<br/>Sharing it may compromise your account security.
                    </p>
                </td>
            </tr>
            <!-- Footer -->
            <tr>
                <td style="background: #f8f9fa; padding: 20px; text-align: center; border-radius: 0 0 8px 8px; border-top: 1px solid #e9ecef;">
                    <p style="margin: 0; color: #6c757d; font-size: 12px;">
                        Sent to <t t-out="ctx.get('recipient_email', '')">email</t> from <t t-out="ctx.get('client_ip', 'Unknown')">IP</t>
                    </p>
                    <p style="margin: 8px 0 0; color: #6c757d; font-size: 12px;">
                        <t t-out="object.domain">host.example.com</t> - Secured by Sunray Web Zero Trust
                    </p>
                </td>
            </tr>
        </table>
    </div>
</div>
            </field>
        </record>

        <!-- Welcome Email Template - For Email Login Authorization -->
        <record id="mail_template_user_welcome" model="mail.template">
            <field name="name">Sunray: Welcome - Access Granted</field>
            <field name="model_id" ref="model_sunray_host"/>
            <field name="subject">You've been granted access to {{ object.domain }}</field>
            <field name="email_from">{{ object.env.company.email_formatted or 'noreply@sunray-zero-trust.app' }}</field>
            <field name="email_to">{{ ctx.get('recipient_email', '') }}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 13px;">
    <div style="background-color: #f9f9f9; padding: 20px 0px;">
        <table cellpadding="0" cellspacing="0" style="margin: 0 auto; width: 600px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <!-- Header -->
            <tr>
                <td style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); padding: 30px; text-align: center; border-radius: 8px 8px 0 0;">
                    <h1 style="color: white; margin: 0; font-size: 24px; font-weight: normal;">
                        Welcome! Access Granted
                    </h1>
                </td>
            </tr>
            <!-- Body -->
            <tr>
                <td style="padding: 30px;">
                    <p style="margin: 0 0 20px; font-size: 14px; line-height: 1.6;">
                        You have been authorized to access <strong><t t-out="object.domain">host.example.com</t></strong>.
                    </p>
                    <!-- Instructions Box -->
                    <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h3 style="margin: 0 0 10px; font-size: 16px;">How to log in:</h3>
                        <ol style="margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li>Visit <strong><a t-att-href="object.backend_url" style="color: #007bff;"><t t-out="object.backend_url">https://host.example.com</t></a></strong></li>
                            <li>Enter your email address</li>
                            <li>Check your inbox for a one-time login code</li>
                            <li>Enter the code to complete your login</li>
                        </ol>
                    </div>
                    <p style="margin: 20px 0; font-size: 13px; color: #666;">
                        If you weren't expecting this access, please contact your administrator.
                    </p>
                </td>
            </tr>
            <!-- Footer -->
            <tr>
                <td style="background: #f8f9fa; padding: 20px; text-align: center; border-radius: 0 0 8px 8px; border-top: 1px solid #e9ecef;">
                    <p style="margin: 0; color: #6c757d; font-size: 12px;">
                        <t t-out="object.domain">host.example.com</t> - Secured by Sunray Web Zero Trust
                    </p>
                </td>
            </tr>
        </table>
    </div>
</div>
            </field>
        </record>
    </data>
</odoo>
